<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Subspace : Lightweight vector and matrix math library for OpenGL programming in Scala.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Subspace</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/jpbetz/subspace">View on GitHub</a>

          <h1 id="project_title">Subspace</h1>
          <h2 id="project_tagline">Lightweight vector and matrix math library for OpenGL programming in Scala.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/jpbetz/subspace/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/jpbetz/subspace/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="subspace" class="anchor" href="#subspace" aria-hidden="true"><span class="octicon octicon-link"></span></a>Subspace</h1>

<p>Lightweight vector and matrix math library for OpenGL programming in Scala.</p>

<p>Inspired by <a href="http://glm.g-truc.net/0.9.6/index.html">glm</a> Subspace makes the vector and matrix computations that needs
to be performed on the CPU a bit easier by providing features that graphics programmers are familiar with from shader
programming (like swizzle operators) as well as a complete set of functions for graphics programming,  including
functions that have been deprecated by OpenGL such as <code>glRotate</code>, <code>gluPerspective</code> and <code>gluLookAt</code>.</p>

<p>This contains core classes such as Vector3, Matrix4x4 and Quaternion.  It also
provides <a href="https://www.opengl.org/wiki/Data_Type_%28GLSL%29#Swizzling">swizzling</a> and
<a href="https://www.opengl.org/wiki/Data_Type_%28GLSL%29#Vector_constructors">convenience constructors</a>.</p>

<p>To minimize it's footprint, this library has no dependencies.  Is intended for use with OpenGL, via bindings such as
LWJGL.</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Vector classes:</p>

<div class="highlight highlight-scala"><pre><span class="pl-k">val</span> <span class="pl-en">modelPosition</span> <span class="pl-k">=</span> <span class="pl-en">Vector3</span>(<span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-c1">1</span>)
modelPosition.rotate(<span class="pl-en">Orientation</span>.y, scala.math.<span class="pl-en">Pi</span>.toFloat<span class="pl-k">/</span><span class="pl-c1">2</span>)</pre></div>

<p>Matrix classes:</p>

<div class="highlight highlight-scala"><pre><span class="pl-k">val</span> <span class="pl-en">perspectiveMatrix</span> <span class="pl-k">=</span> <span class="pl-en">Matrix4x4</span>.forPerspective(scala.math.<span class="pl-en">Pi</span>.toFloat<span class="pl-k">/</span><span class="pl-c1">2f</span>, <span class="pl-c1">1f</span>, <span class="pl-c1">1f</span>, zNear, zFar)
...
<span class="pl-k">val</span> <span class="pl-en">worldToViewMatrix</span> <span class="pl-k">=</span> <span class="pl-en">Matrix4x4</span>.forRotation(cameraRotation)
<span class="pl-k">val</span> <span class="pl-en">modelToWorldMatrix</span> <span class="pl-k">=</span> <span class="pl-en">Matrix4x4</span>.forTranslation(modelPosition)
...
<span class="pl-k">val</span> <span class="pl-en">modelViewMatrix</span> <span class="pl-k">=</span> modelToWorldMatrix <span class="pl-k">*</span> worldToViewMatrix
<span class="pl-k">val</span> <span class="pl-en">normalViewMatrix</span> <span class="pl-k">=</span> modelViewMatrix.normalMatrix</pre></div>

<p>Quaternion:</p>

<div class="highlight highlight-scala"><pre><span class="pl-k">val</span> <span class="pl-en">quat</span> <span class="pl-k">=</span> <span class="pl-en">Quaternion</span>.fromAxisAngle(<span class="pl-en">Orientation</span>.x, scala.math.<span class="pl-en">Pi</span>.toFloat<span class="pl-k">/</span><span class="pl-c1">4</span>)
<span class="pl-en">Matrix4x4</span>.forRotation(quat) <span class="pl-k">*</span> <span class="pl-en">Vector3</span>(<span class="pl-c1">1</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>)
<span class="pl-en">Vector3</span>(<span class="pl-c1">1</span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span>).rotate(quat)</pre></div>

<p>Swizzle operators and vector convenience constructors work the same as in GLSL.  E.g.:</p>

<div class="highlight highlight-scala"><pre><span class="pl-en">Vector4</span>(<span class="pl-c1">0</span>, vec2.yx, <span class="pl-c1">0</span>) <span class="pl-c">// == Vector4(0, vec2.y, vec2.x, 0)</span>
vec4.xz <span class="pl-c">// == Vector2(vec4.x, vec4.z)</span></pre></div>

<p>Implementations of functions deprecated from OpenGL:</p>

<div class="highlight highlight-scala"><pre><span class="pl-k">val</span> <span class="pl-en">perspectiveMatrix</span> <span class="pl-k">=</span> <span class="pl-en">Matrix4x4</span>.forPerspective(...)</pre></div>

<p>ByteBuffer writers to ease integration with low level OpenGL APIs for the JVM such as LWJGL</p>

<div class="highlight highlight-scala"><pre><span class="pl-k">val</span> <span class="pl-en">cameraPosition</span> <span class="pl-k">=</span> <span class="pl-en">Vector4</span>(<span class="pl-c1">10</span>, <span class="pl-c1">10</span>, <span class="pl-c1">5</span>, <span class="pl-c1">0</span>).allocateBuffer()</pre></div>

<h2>
<a id="opengl-programming-in-scala" class="anchor" href="#opengl-programming-in-scala" aria-hidden="true"><span class="octicon octicon-link"></span></a>OpenGL Programming in Scala</h2>

<p>Subspace works well with LWJGL, a library providing access the full OpenGL API from the JVM.</p>

<p>This library can be used with version 2 and 3 of LWJGL.  While LWJGL 2 provides a utility library with vector
and matrix classes, it is rather incomplete.  And in LWJGL 3, they are removing the utility library entirely.</p>

<p>To use this library with LWJGL,  simply build whatever types are needed and then use the toBuffer methods to produce the
ByteBuffers needed by LWJGL.  E.g.:</p>

<pre><code>val modelViewMatrix = Matrix4x4.forTranslationRotationScale(...)
glUniformMatrix4("modelViewMatrix", false, modelViewMatrix.toBuffer)
</code></pre>

<h2>
<a id="design" class="anchor" href="#design" aria-hidden="true"><span class="octicon octicon-link"></span></a>Design</h2>

<p>Goals:</p>

<ul>
<li>Be good at one thing.  Provide the vector and matrix types needed to program modern against a modern graphics pipeline, and nothing else.</li>
<li>Provide the best features from the vector and matrix types in shader languages like GLSL.</li>
<li>Consistent and complete.  Similar libraries for other languages have been studied to make sure all the convenience operations developers expect have been included.</li>
<li>Scala idomatic. Immutable case classes for all vector and matrix types. Carefully defined operator overloading for natural looking mathematical expressions.</li>
<li>Minimal footprint.  No dependencies.</li>
</ul>

<p>Non-goals:</p>

<ul>
<li>Provide Scala bindings for OpenGL</li>
<li>Write a graphics/game engine</li>
<li>Write a general purpose linear algebra library</li>
</ul>

<h2>
<a id="current-limitations" class="anchor" href="#current-limitations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Current Limitations</h2>

<ul>
<li>All types are currently reference types.  This has negative performance implications.  While scala does allow
stack allocated value types to be defined by extending AnyVal,  AnyVal can only be used for single field types, not
multi field types like Vector2.  It is not clear if Scala will ever support stack allocated value types that could
be used for my purposes.   Maybe if/when <a href="http://cr.openjdk.java.net/%7Ejrose/values/values-0.html">Java adds value types</a>,
scala will provide a way to stack allocate these types.</li>
</ul>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO</h2>

<ul>
<li>[ ] Finish up test suite</li>
<li>[ ] Implement projection/reflection convenience methods on Vector3</li>
<li>[ ] Flesh out scaladoc</li>
<li>[ ] Add Color and UV coordinate related conveniences.  Might be as simple as adding swizzle operators (rgba, stpq) to Vector3 and Vector4.</li>
</ul>

<h2>
<a id="references" class="anchor" href="#references" aria-hidden="true"><span class="octicon octicon-link"></span></a>References</h2>

<ul>
<li><a href="http://glm.g-truc.net/0.9.6/index.html">http://glm.g-truc.net/0.9.6/index.html</a></li>
<li><a href="https://github.com/ra4king/LWJGL-OpenGL-Utils/tree/master/src/com/ra4king/opengl/util/math">https://github.com/ra4king/LWJGL-OpenGL-Utils/tree/master/src/com/ra4king/opengl/util/math</a></li>
<li><a href="http://developer.android.com/reference/android/opengl/Matrix.html">http://developer.android.com/reference/android/opengl/Matrix.html</a></li>
<li><a href="http://docs.unity3d.com/ScriptReference/index.html">http://docs.unity3d.com/ScriptReference/index.html</a></li>
<li><a href="https://github.com/mrdoob/three.js/tree/master/src/math">https://github.com/mrdoob/three.js/tree/master/src/math</a></li>
<li><a href="http://cr.openjdk.java.net/%7Ejrose/values/values-0.html">http://cr.openjdk.java.net/~jrose/values/values-0.html</a></li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Subspace maintained by <a href="https://github.com/jpbetz">jpbetz</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
